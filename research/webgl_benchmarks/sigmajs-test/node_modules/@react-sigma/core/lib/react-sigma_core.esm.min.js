import*as e from"react";import t,{createContext as n,useContext as r,useCallback as a,useState as c,useEffect as l,forwardRef as o,useRef as s,useImperativeHandle as i,useMemo as u}from"react";import d from"graphology";import{Sigma as g}from"sigma";const m=n(null),h=m.Provider;function f(){const e=r(m);if(null==e)throw new Error("No context provided: useSigmaContext() can only be used in a descendant of <SigmaContainer>");return e}function v(){return f().sigma}function p(){const{sigma:e}=f();return a((t=>{e&&Object.keys(t).forEach((n=>{e.setSetting(n,t[n])}))}),[e])}function b(e){return new Set(Object.keys(e))}const w=b({clickNode:!0,rightClickNode:!0,downNode:!0,enterNode:!0,leaveNode:!0,doubleClickNode:!0,wheelNode:!0,clickEdge:!0,rightClickEdge:!0,downEdge:!0,enterEdge:!0,leaveEdge:!0,doubleClickEdge:!0,wheelEdge:!0,clickStage:!0,rightClickStage:!0,downStage:!0,doubleClickStage:!0,wheelStage:!0,beforeRender:!0,afterRender:!0,kill:!0,upStage:!0,upEdge:!0,upNode:!0,enterStage:!0,leaveStage:!0,resize:!0,afterClear:!0,afterProcess:!0,beforeClear:!0,beforeProcess:!0}),E=b({click:!0,rightClick:!0,doubleClick:!0,mouseup:!0,mousedown:!0,mousemove:!0,mousemovebody:!0,mouseleave:!0,mouseenter:!0,wheel:!0}),O=b({touchup:!0,touchdown:!0,touchmove:!0}),y=b({updated:!0});function _(){const e=v(),t=p(),[n,r]=c({});return l((()=>{if(!e||!n)return;const t=n,r=Object.keys(t);return r.forEach((n=>{const r=t[n];w.has(n)&&e.on(n,r),E.has(n)&&e.getMouseCaptor().on(n,r),O.has(n)&&e.getTouchCaptor().on(n,r),y.has(n)&&e.getCamera().on(n,r)})),()=>{e&&r.forEach((n=>{const r=t[n];w.has(n)&&e.off(n,r),E.has(n)&&e.getMouseCaptor().off(n,r),O.has(n)&&e.getTouchCaptor().off(n,r),y.has(n)&&e.getCamera().off(n,r)}))}}),[e,n,t]),r}function j(){const e=v();return a(((t,n=!0)=>{e&&t&&(n&&e.getGraph().order>0&&e.getGraph().clear(),e.getGraph().import(t),e.refresh())}),[e])}function C(){return Math.random().toString(36).slice(2)}function N(e,t){if(e===t)return!0;if("object"==typeof e&&null!=e&&"object"==typeof t&&null!=t){if(Object.keys(e).length!=Object.keys(t).length)return!1;for(const n in e){if(!Object.hasOwn(t,n))return!1;if(!N(e[n],t[n]))return!1}return!0}return!1}function x(e){const t=v(),[n,r]=c(e||{});l((()=>{N(n,e||{})||r(e||{})}),[e]);const o=a((e=>{t.getCamera().animatedZoom(Object.assign(Object.assign({},n),e))}),[t,n]),s=a((e=>{t.getCamera().animatedUnzoom(Object.assign(Object.assign({},n),e))}),[t,n]),i=a((e=>{t.getCamera().animatedReset(Object.assign(Object.assign({},n),e))}),[t,n]),u=a(((e,r)=>{t.getCamera().animate(e,Object.assign(Object.assign({},n),r))}),[t,n]),d=a(((e,r)=>{const a=t.getNodeDisplayData(e);a?t.getCamera().animate(a,Object.assign(Object.assign({},n),r)):console.log(`Node ${e} not found`)}),[t,n]);return{zoomIn:o,zoomOut:s,reset:i,goto:u,gotoNode:d}}function k(e){const t=f(),[n,r]=c(!1),[o,s]=c(e||t.container),i=()=>r((e=>!e));l((()=>(document.addEventListener("fullscreenchange",i),()=>document.removeEventListener("fullscreenchange",i))),[i]),l((()=>{s(e||t.container)}),[e,t.container]);return{toggle:a((()=>{var e;e=o,document.fullscreenElement!==e?e.requestFullscreen():document.exitFullscreen&&document.exitFullscreen()}),[o]),isFullScreen:n}}const S=o((({graph:e,id:n,className:r,style:a,settings:o={},children:m},f)=>{const v=s(null),p=s(null),b={className:`react-sigma ${r||""}`,id:n,style:a},[w,E]=c(null),[O,y]=c(o);l((()=>{N(O,o)||y(o)}),[o]),l((()=>{let t=null;if(null!==p.current){let n=new d;e&&(n="function"==typeof e?new e:e),t=new g(n,p.current,O),w&&t.getCamera().setState(w.getCamera().getState())}return E(t),()=>{t&&t.kill(),E(null)}}),[p,e,O]),i(f,(()=>w),[w]);const _=u((()=>w&&v.current?{sigma:w,container:v.current}:null),[w,v.current]),j=null!==_?t.createElement(h,{value:_},m):null;return t.createElement("div",Object.assign({},b,{ref:v}),t.createElement("div",{className:"sigma-container",ref:p}),j)}));const H=({id:e,className:n,style:r,children:a,position:c="bottom-left"})=>{const l={className:`react-sigma-controls ${n||""} ${c}`,id:e,style:r};return t.createElement("div",Object.assign({},l),a)};var M;function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$.apply(this,arguments)}var z,P=function(t){return e.createElement("svg",$({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"plus-solid_svg__svg-inline--fa plus-solid_svg__fa-plus plus-solid_svg__fa-w-14","data-icon":"plus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},t),M||(M=e.createElement("path",{fill:"currentColor",d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}var F,G=function(t){return e.createElement("svg",V({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"minus-solid_svg__svg-inline--fa minus-solid_svg__fa-minus minus-solid_svg__fa-w-14","data-icon":"minus","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},t),z||(z=e.createElement("path",{fill:"currentColor",d:"M416 208H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h384c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32"})))};function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}var I=function(t){return e.createElement("svg",B({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"dot-circle-regular_svg__svg-inline--fa dot-circle-regular_svg__fa-dot-circle dot-circle-regular_svg__fa-w-16","data-icon":"dot-circle","data-prefix":"far",viewBox:"0 0 512 512",width:"1em",height:"1em"},t),F||(F=e.createElement("path",{fill:"currentColor",d:"M256 56c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m0-48C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8m0 168c-44.183 0-80 35.817-80 80s35.817 80 80 80 80-35.817 80-80-35.817-80-80-80"})))};const L=({className:e,style:n,animationDuration:r=200,children:a,labels:c={}})=>{const{zoomIn:l,zoomOut:o,reset:s}=x({duration:r,factor:1.5}),i={style:n,className:`react-sigma-control ${e||""}`};return t.createElement(t.Fragment,null,t.createElement("div",Object.assign({},i),t.createElement("button",{onClick:()=>l(),title:c.zoomIn||"Zoom In"},a?a[0]:t.createElement(P,{style:{width:"1em"}}))),t.createElement("div",Object.assign({},i),t.createElement("button",{onClick:()=>o(),title:c.zoomOut||"Zoom Out"},a?a[1]:t.createElement(G,{style:{width:"1em"}}))),t.createElement("div",Object.assign({},i),t.createElement("button",{onClick:()=>s(),title:c.reset||"See whole graph"},a?a[2]:t.createElement(I,{style:{width:"1em"}}))))};var D;function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}var Z,A=function(t){return e.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"expand-solid_svg__svg-inline--fa expand-solid_svg__fa-expand expand-solid_svg__fa-w-14","data-icon":"expand","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},t),D||(D=e.createElement("path",{fill:"currentColor",d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12M288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12m148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12M160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12"})))};function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T.apply(this,arguments)}var q=function(t){return e.createElement("svg",T({xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"compress-solid_svg__svg-inline--fa compress-solid_svg__fa-compress compress-solid_svg__fa-w-14","data-icon":"compress","data-prefix":"fas",viewBox:"0 0 448 512",width:"1em",height:"1em"},t),Z||(Z=e.createElement("path",{fill:"currentColor",d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12m-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24m0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12m192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12"})))};const U=({id:e,className:n,style:r,container:a,children:c,labels:l={}})=>{const{isFullScreen:o,toggle:s}=k(null==a?void 0:a.current),i={className:`react-sigma-control ${n||""}`,id:e,style:r};return document.fullscreenEnabled?t.createElement("div",Object.assign({},i),t.createElement("button",{onClick:s,title:o?l.exit||"Exit fullscreen":l.enter||"Enter fullscreen"},c&&!o&&c[0],c&&o&&c[1],!c&&!o&&t.createElement(A,{style:{width:"1em"}}),!c&&o&&t.createElement(q,{style:{width:"1em"}}))):null},J=({id:e,className:n,style:r,labels:a={}})=>{const o=v(),s=_(),{gotoNode:i}=x(),[u,d]=c(""),[g,m]=c([]),[h,f]=c(null),[p,b]=c("");l((()=>{b(`search-${C()}`)}),[]),l((()=>{const e=[];!h&&u.length>1&&o.getGraph().forEachNode(((t,n)=>{n.label&&n.label.toLowerCase().includes(u.toLowerCase())&&e.push({id:t,label:n.label})})),m(e)}),[u]),l((()=>{s({clickStage:()=>{f(null),d("")}})}),[s]),l((()=>{if(h)return o.getGraph().setNodeAttribute(h,"highlighted",!0),i(h),()=>{o.getGraph().setNodeAttribute(h,"highlighted",!1)}}),[h]);const w={className:`react-sigma-search ${n||""}`,id:e,style:r};return t.createElement("div",Object.assign({},w),t.createElement("label",{htmlFor:p,style:{display:"none"}},a.text||"Search a node"),t.createElement("input",{id:p,type:"text",placeholder:a.placeholder||"Search...",list:`${p}-datalist`,value:u,onChange:e=>{const t=e.target.value,n=g.find((e=>e.label===t));n?(d(n.label),m([]),f(n.id)):(f(null),d(t))}}),t.createElement("datalist",{id:`${p}-datalist`},g.map((e=>t.createElement("option",{key:e.id,value:e.label},e.label)))))};export{H as ControlsContainer,U as FullScreenControl,J as SearchControl,S as SigmaContainer,m as SigmaContext,h as SigmaProvider,L as ZoomControl,C as getUniqueKey,N as isEqual,x as useCamera,k as useFullScreen,j as useLoadGraph,_ as useRegisterEvents,p as useSetSettings,v as useSigma,f as useSigmaContext};
//# sourceMappingURL=react-sigma_core.esm.min.js.map
